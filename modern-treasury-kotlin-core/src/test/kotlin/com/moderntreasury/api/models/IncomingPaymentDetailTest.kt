package com.moderntreasury.api.models

import java.time.LocalDate
import java.time.OffsetDateTime
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

class IncomingPaymentDetailTest {

    @Test
    fun createIncomingPaymentDetail() {
        val incomingPaymentDetail =
            IncomingPaymentDetail.builder()
                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .object_("string")
                .liveMode(true)
                .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .updatedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .internalAccountId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .virtualAccountId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .virtualAccount(
                    VirtualAccount.builder()
                        .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                        .object_("string")
                        .liveMode(true)
                        .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .updatedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .discardedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .name("string")
                        .description("string")
                        .counterpartyId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                        .internalAccountId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                        .accountDetails(
                            listOf(
                                AccountDetail.builder()
                                    .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .object_("string")
                                    .liveMode(true)
                                    .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                    .updatedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                    .discardedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                    .accountNumber("string")
                                    .accountNumberType(AccountDetail.AccountNumberType.CLABE)
                                    .accountNumberSafe("string")
                                    .build()
                            )
                        )
                        .routingDetails(
                            listOf(
                                RoutingDetail.builder()
                                    .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .object_("string")
                                    .liveMode(true)
                                    .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                    .updatedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                    .discardedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                    .routingNumber("string")
                                    .routingNumberType(RoutingDetail.RoutingNumberType.ABA)
                                    .paymentType(RoutingDetail.PaymentType.ACH)
                                    .bankName("string")
                                    .bankAddress(
                                        RoutingDetail.Address.builder()
                                            .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                            .object_("string")
                                            .liveMode(true)
                                            .createdAt(
                                                OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                            )
                                            .updatedAt(
                                                OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                            )
                                            .line1("string")
                                            .line2("string")
                                            .locality("string")
                                            .region("string")
                                            .postalCode("string")
                                            .country("string")
                                            .build()
                                    )
                                    .build()
                            )
                        )
                        .debitLedgerAccountId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                        .creditLedgerAccountId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                        .metadata(VirtualAccount.Metadata.builder().build())
                        .build()
                )
                .transactionLineItemId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .transactionId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .ledgerTransactionId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .type(IncomingPaymentDetail.Type.ACH)
                .data(IncomingPaymentDetail.Data.builder().build())
                .amount(123L)
                .currency(Currency.AED)
                .direction(IncomingPaymentDetail.Direction.CREDIT)
                .status(IncomingPaymentDetail.Status.COMPLETED)
                .metadata(IncomingPaymentDetail.Metadata.builder().build())
                .asOfDate(LocalDate.parse("2019-12-27"))
                .vendorId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .originatingRoutingNumber("string")
                .originatingRoutingNumberType(
                    IncomingPaymentDetail.OriginatingRoutingNumberType.ABA
                )
                .originatingAccountNumber("string")
                .originatingAccountNumberSafe("string")
                .originatingAccountNumberType(
                    IncomingPaymentDetail.OriginatingAccountNumberType.CLABE
                )
                .build()
        assertThat(incomingPaymentDetail).isNotNull
        assertThat(incomingPaymentDetail.id()).isEqualTo("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(incomingPaymentDetail.object_()).isEqualTo("string")
        assertThat(incomingPaymentDetail.liveMode()).isEqualTo(true)
        assertThat(incomingPaymentDetail.createdAt())
            .isEqualTo(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(incomingPaymentDetail.updatedAt())
            .isEqualTo(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(incomingPaymentDetail.internalAccountId())
            .isEqualTo("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(incomingPaymentDetail.virtualAccountId())
            .isEqualTo("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(incomingPaymentDetail.virtualAccount())
            .isEqualTo(
                VirtualAccount.builder()
                    .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                    .object_("string")
                    .liveMode(true)
                    .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .updatedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .discardedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .name("string")
                    .description("string")
                    .counterpartyId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                    .internalAccountId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                    .accountDetails(
                        listOf(
                            AccountDetail.builder()
                                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .object_("string")
                                .liveMode(true)
                                .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .updatedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .discardedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .accountNumber("string")
                                .accountNumberType(AccountDetail.AccountNumberType.CLABE)
                                .accountNumberSafe("string")
                                .build()
                        )
                    )
                    .routingDetails(
                        listOf(
                            RoutingDetail.builder()
                                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .object_("string")
                                .liveMode(true)
                                .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .updatedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .discardedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .routingNumber("string")
                                .routingNumberType(RoutingDetail.RoutingNumberType.ABA)
                                .paymentType(RoutingDetail.PaymentType.ACH)
                                .bankName("string")
                                .bankAddress(
                                    RoutingDetail.Address.builder()
                                        .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .object_("string")
                                        .liveMode(true)
                                        .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                        .updatedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                        .line1("string")
                                        .line2("string")
                                        .locality("string")
                                        .region("string")
                                        .postalCode("string")
                                        .country("string")
                                        .build()
                                )
                                .build()
                        )
                    )
                    .debitLedgerAccountId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                    .creditLedgerAccountId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                    .metadata(VirtualAccount.Metadata.builder().build())
                    .build()
            )
        assertThat(incomingPaymentDetail.transactionLineItemId())
            .isEqualTo("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(incomingPaymentDetail.transactionId())
            .isEqualTo("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(incomingPaymentDetail.ledgerTransactionId())
            .isEqualTo("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(incomingPaymentDetail.type()).isEqualTo(IncomingPaymentDetail.Type.ACH)
        assertThat(incomingPaymentDetail.data())
            .isEqualTo(IncomingPaymentDetail.Data.builder().build())
        assertThat(incomingPaymentDetail.amount()).isEqualTo(123L)
        assertThat(incomingPaymentDetail.currency()).isEqualTo(Currency.AED)
        assertThat(incomingPaymentDetail.direction())
            .isEqualTo(IncomingPaymentDetail.Direction.CREDIT)
        assertThat(incomingPaymentDetail.status()).isEqualTo(IncomingPaymentDetail.Status.COMPLETED)
        assertThat(incomingPaymentDetail.metadata())
            .isEqualTo(IncomingPaymentDetail.Metadata.builder().build())
        assertThat(incomingPaymentDetail.asOfDate()).isEqualTo(LocalDate.parse("2019-12-27"))
        assertThat(incomingPaymentDetail.vendorId())
            .isEqualTo("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(incomingPaymentDetail.originatingRoutingNumber()).isEqualTo("string")
        assertThat(incomingPaymentDetail.originatingRoutingNumberType())
            .isEqualTo(IncomingPaymentDetail.OriginatingRoutingNumberType.ABA)
        assertThat(incomingPaymentDetail.originatingAccountNumber()).isEqualTo("string")
        assertThat(incomingPaymentDetail.originatingAccountNumberSafe()).isEqualTo("string")
        assertThat(incomingPaymentDetail.originatingAccountNumberType())
            .isEqualTo(IncomingPaymentDetail.OriginatingAccountNumberType.CLABE)
    }
}
